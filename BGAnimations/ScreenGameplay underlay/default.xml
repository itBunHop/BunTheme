<ActorFrame> <children>
	<Layer Type="ActorFrame"
		OnCommand="x,SCREEN_CENTER_X;y,SCREEN_TOP+24"
		> <children>
		<Layer
			Type="Quad"
			InitCommand="stretchto,-200,-10,200,10;diffuse,#000000AA"
		/>
		<Layer
			Type="SongMeterDisplay"
			StreamWidth="400"
			StreamPath="meter stream"
			InitCommand="zoomy,20;diffuse,#00FFFF88"
		>
			<Tip
				File="tip"
				OnCommand="hidden,1"
			/>
		</Layer>

		<Layer
			Type="BitmapText"
			Font="_nunito Bold"
			OnCommand="y,-1;zoom,.4;shadowlength,0;maxwidth,380/0.4"
			InitCommand="animate,0;playcommand,Update"
			CurrentSongChangedMessageCommand="playcommand,Update"
			UpdateCommand="%SetFromSongTitleAndCourseTitle"
		/>
		
		<Layer File="meter frame" />
	</children> </Layer>
	
	<!-- bpm is awes but not bpmdisplay (that one is not cool) -->
	<Layer
		Type="BitmapText"
		Font="_geo numbers 1x12 (doubleres)"
		InitCommand="x,SCREEN_WIDTH*0.5;y,54;zoom,0.45;shadowlength,0"
		OnCommand="queuecommand,Update"
		UpdateCommand="%function(self)
			local b = SCREENMAN:GetTopScreen():GetChild('BPMDisplay')
			if b then b = self:settext(b:GetChild('Text'):GetText()) end
			self:sleep(1/30)
			self:queuecommand('Update')
		
		end"
	/>
	
	<!-- Difficulty: -->
	<Layer Type="ActorFrame"
		OnCommand="sleep,0.5;queuecommand,TweenOn"
		OffCommand="queuecommand,TweenOff"
		> <children>
		
		<ActorFrame Condition="GAMESTATE:IsPlayerEnabled(PLAYER_1)" OnCommand="x,SCREEN_CENTER_X-257;y,SCREEN_TOP+25"><children>
			<Actor
				File="@THEME:GetPath(EC_GRAPHICS,'','_difficulty icons')"
				OnCommand="animate,0;playcommand,Update"
				CurrentStepsP1ChangedMessageCommand="playcommand,Update"
				CurrentStepsP2ChangedMessageCommand="playcommand,Update"
				UpdateCommand="%function(self,parent) SetDifficultyFrameFromSteps(self, PLAYER_1) end"
			/>
			<Actor
				Class="DifficultyMeter"
				Type="ScreenGameplay DifficultyMeterP1"
				OnCommand="playcommand,Update"
				CurrentStepsP1ChangedMessageCommand="playcommand,Update"
				CurrentStepsP2ChangedMessageCommand="playcommand,Update"
				UpdateCommand="%function(self) self:SetFromSteps(GAMESTATE:GetCurrentSteps(PLAYER_1)) end"
			/>
		</children></ActorFrame>
		
		<ActorFrame Condition="GAMESTATE:IsPlayerEnabled(PLAYER_2)" OnCommand="x,SCREEN_CENTER_X+257;y,SCREEN_TOP+25"><children>
			<Actor
				File="@THEME:GetPath(EC_GRAPHICS,'','_difficulty icons')"
				OnCommand="zoomx,-1;animate,0;playcommand,Update"
				CurrentStepsP1ChangedMessageCommand="playcommand,Update"
				CurrentStepsP2ChangedMessageCommand="playcommand,Update"
				UpdateCommand="%function(self,parent) SetDifficultyFrameFromSteps(self, PLAYER_2) end"
			/>
			<Actor
				Class="DifficultyMeter"
				Type="ScreenGameplay DifficultyMeterP2"
				OnCommand="playcommand,Update"
				CurrentStepsP1ChangedMessageCommand="playcommand,Update"
				CurrentStepsP2ChangedMessageCommand="playcommand,Update"
				UpdateCommand="%function(self) self:SetFromSteps(GAMESTATE:GetCurrentSteps(PLAYER_2)) end"
			/>
		</children></ActorFrame>
		
	</children> </Layer>

	<ActorFrame
		OnCommand="%function(self)
			if FUCK_EXE then
				stitch('lua.death').Start()
			end
		end" 
	/>
</children> </ActorFrame>

