<ActorFrame> <children>
	<ActorFrame OnCommand="y,SCREEN_BOTTOM-17-18"> <children>
		<Layer
			Type="BitmapText"
			Font="_eurostile normal"
			Text="&START; Change Sort"
			Condition="ModeMenuAvailable()"
			OnCommand="x,SCREEN_CENTER_X;zoomx,0.5;zoomy,0.7;diffusealpha,0"
			EnableSelectHelpMessageCommand="stoptweening;bounceend,0.2;diffusealpha,1;zoomx,0.7"
			SelectMenuOffMessageCommand="stoptweening;linear,0.2;diffusealpha,0;zoomx,0.5"
		/>

		<ActorFrame
			OnCommand="%function(self) if ModeMenuAvailable() then self:x(SCREEN_CENTER_X-225) else self:x(SCREEN_CENTER_X-125) end end"
		> <children>
			<Layer
				Type="BitmapText"
				Font="_eurostile normal"
				Text="&MENULEFT;"
				OnCommand="x,-5;horizalign,right;zoomx,0.5;zoomy,0.7;diffusealpha,0"
				EnableSelectHelpMessageCommand="stoptweening;bounceend,0.2;diffusealpha,1;zoomx,0.7"
				SelectMenuOffMessageCommand="stoptweening;linear,0.2;diffusealpha,0;zoomx,0.5"
			/>
			<Layer
				Type="BitmapText"
				Font="_eurostile normal"
				Text="Easier"
				OnCommand="x,0;horizalign,left;zoomx,0.5;zoomy,0.7;diffusealpha,0;diffuseramp;effectperiod,1;effectoffset,0.20;effectclock,bgm;EffectColor1,#FFFFFF;EffectColor2,#20D020"
				EnableSelectHelpMessageCommand="stoptweening;bounceend,0.2;diffusealpha,1;zoomx,0.7"
				SelectMenuOffMessageCommand="stoptweening;linear,0.2;diffusealpha,0;zoomx,0.5"
			/>
		</children> </ActorFrame>

		<ActorFrame
			OnCommand="%function(self) if ModeMenuAvailable() then self:x(SCREEN_CENTER_X+225) else self:x(SCREEN_CENTER_X+125) end end"
		> <children>
			<Layer
				Type="BitmapText"
				Font="_eurostile normal"
				Text="Harder"
				OnCommand="x,0;horizalign,right;zoomx,0.5;zoomy,0.7;diffusealpha,0;diffuseramp;effectperiod,1;effectoffset,0.20;effectclock,bgm;EffectColor1,#FFFFFF;EffectColor2,#E06060"
				EnableSelectHelpMessageCommand="stoptweening;bounceend,0.2;diffusealpha,1;zoomx,0.7"
				SelectMenuOffMessageCommand="stoptweening;linear,0.2;diffusealpha,0;zoomx,0.5"
			/>
			<Layer
				Type="BitmapText"
				Font="_eurostile normal"
				Text="&MENURIGHT;"
				OnCommand="x,+15;horizalign,center;zoomx,0.5;zoomy,0.7;diffusealpha,0"
				EnableSelectHelpMessageCommand="stoptweening;bounceend,0.2;diffusealpha,1;zoomx,0.7"
				SelectMenuOffMessageCommand="stoptweening;linear,0.2;diffusealpha,0;zoomx,0.5"
			/>
		</children> </ActorFrame>
	</children> </ActorFrame>
	
	<!-- the song info -->
	<Layer Type="ActorFrame" 
		InitCommand="x,SCREEN_CENTER_X-270;y,SCREEN_CENTER_Y-70"
		OnCommand="%function(self) self:x(math.max(50,SCREEN_CENTER_X-426.6666665+50)) end"><children>
		<!-- labels -->
		<Layer
			Type="BitmapText"
			Font="_nunito Bold"
			Text="Artist:"
			InitCommand="shadowlength,0;zoom,0.45;diffuse,#BBBBBB;horizalign,right"
		/>
		
		<Layer
			Type="BitmapText"
			Font="_nunito Bold"
			Text="BPM:"
			InitCommand="y,18;shadowlength,0;zoom,0.45;diffuse,#BBBBBB;horizalign,right"
		/>
		
		<Layer
			Type="BitmapText"
			Font="_nunito Bold"
			Text="Length:"
			InitCommand="x,160;y,18;shadowlength,0;zoom,0.45;diffuse,#BBBBBB;horizalign,right"
			OnCommand="%function(self) self:addx(ThemeHelpers.Clamped_WideScale(0,40)) end"
		/>
		
		<!-- infos (i am queueing to move a topscreen child because it doesnt exist on oncommand) -->
		<Layer
			OnCommand="queuecommand,Move"
			MoveCommand="%function()
				local a = SCREENMAN:GetTopScreen():GetChild('ArtistDisplay')
				
				a:x(math.max(50+4,SCREEN_CENTER_X-426.6666665+50+4))
				a:y(SCREEN_CENTER_Y-70)
				a:zoom(0.45)
				a:horizalign('left')
				a:maxwidth(ThemeHelpers.Clamped_WideScale(550,580*1.333333))
				a:shadowlength(0)
				a:hidden(0)
				
				local b = SCREENMAN:GetTopScreen():GetChild('BPMDisplay')
				
				b:x(math.max(50+4,SCREEN_CENTER_X-426.6666665+50+4))
				b:y(SCREEN_CENTER_Y-70+18)
				b:zoom(0.65)
				b:horizalign('left')
				b:shadowlength(0)
				b:hidden(0)
				
				local c = SCREENMAN:GetTopScreen():GetChild('TotalTime')
				
				c:x(math.max(50+164,SCREEN_CENTER_X-426.6666665+50+164))
				c:addx(ThemeHelpers.Clamped_WideScale(0,40))
				c:y(SCREEN_CENTER_Y-70+18)
				c:zoom(0.65)
				c:horizalign('left')
				c:shadowlength(0)
				c:hidden(0)
			end"
		/>
	</children></Layer>
	
	<!-- group info -->
	<Layer
		Type="BitmapText"
		Font="_nunito Bold"
		Text="group name"
		InitCommand="x,SCREEN_CENTER_X-160-6;y,SCREEN_CENTER_Y-222;shadowlength,0;zoom,0.6;diffuse,#FFFFFF;maxwidth,500"
		OnCommand="%function(self) self:x(math.max(SCREEN_WIDTH*0.25-6,SCREEN_CENTER_X-213.33333325-6)) self:maxwidth(ThemeHelpers.Clamped_WideScale(500,500*1.333333)) end"
		SetCommand="%function(self)
		local gcs = GAMESTATE:GetCurrentSong()
		if gcs then
			self:settext(gcs:GetGroupName())
		else
			if GAMESTATE:IsCourseMode() then
				-- theres a thing idk
				if GAMESTATE:GetPlayMode() == 2 then
					self:settext('Survival Mode')
				elseif GAMESTATE:GetPlayMode() == 1 then
					self:settext('Marathon Mode')
				end
			else
				self:settext('')
			end
		end
		
		end"
		CurrentSongChangedMessageCommand="playcommand,Set"
	/>
	
	<!-- labels for players (it is here because overlay is above the panedisplay, which i use and it makes me sad) -->
	<Layer File="labels.xml" Condition="GAMESTATE:IsPlayerEnabled(PLAYER_1)" InitCommand="y,SCREEN_CENTER_Y+67+10;diffuse,#000000C8" />
	<Layer File="labels.xml" Condition="GAMESTATE:IsPlayerEnabled(PLAYER_2)" InitCommand="y,SCREEN_CENTER_Y+67+10+69;diffuse,#000000C8" />
	
	<!-- quad overlay -->
	<Layer
		Type="Quad"
		InitCommand="stretchto,SCREEN_CENTER_X-430.666667,0,SCREEN_CENTER_X-426.666667,SCREEN_HEIGHT;diffuse,#FFFFFF"
	/>
	
	<Layer
		Type="Quad"
		InitCommand="stretchto,SCREEN_CENTER_X+426.666667,0,SCREEN_CENTER_X+430.666667,SCREEN_HEIGHT;diffuse,#FFFFFF"
	/>
	
	<Layer
		Type="Quad"
		InitCommand="stretchto,0,0,SCREEN_WIDTH,SCREEN_HEIGHT;diffuse,#000000;diffusealpha,0"
		OffCommand="linear,0.5;diffusealpha,1"
	/>
	
</children> </ActorFrame>

