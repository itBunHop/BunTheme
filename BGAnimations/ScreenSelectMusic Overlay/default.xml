<ActorFrame> <children>
	<ActorFrame OnCommand="y,SCREEN_BOTTOM-17-18"> <children>
		<Layer
			Type="BitmapText"
			Font="_eurostile normal"
			Text="&START; Change Sort"
			Condition="ModeMenuAvailable()"
			OnCommand="x,SCREEN_CENTER_X;zoomx,0.5;zoomy,0.7;diffusealpha,0"
			EnableSelectHelpMessageCommand="stoptweening;bounceend,0.2;diffusealpha,1;zoomx,0.7"
			SelectMenuOffMessageCommand="stoptweening;linear,0.2;diffusealpha,0;zoomx,0.5"
		/>

		<ActorFrame
			OnCommand="%function(self) if ModeMenuAvailable() then self:x(SCREEN_CENTER_X-225) else self:x(SCREEN_CENTER_X-125) end end"
		> <children>
			<Layer
				Type="BitmapText"
				Font="_eurostile normal"
				Text="&MENULEFT;"
				OnCommand="x,-5;horizalign,right;zoomx,0.5;zoomy,0.7;diffusealpha,0"
				EnableSelectHelpMessageCommand="stoptweening;bounceend,0.2;diffusealpha,1;zoomx,0.7"
				SelectMenuOffMessageCommand="stoptweening;linear,0.2;diffusealpha,0;zoomx,0.5"
			/>
			<Layer
				Type="BitmapText"
				Font="_eurostile normal"
				Text="Easier"
				OnCommand="x,0;horizalign,left;zoomx,0.5;zoomy,0.7;diffusealpha,0;diffuseramp;effectperiod,1;effectoffset,0.20;effectclock,bgm;EffectColor1,#FFFFFF;EffectColor2,#20D020"
				EnableSelectHelpMessageCommand="stoptweening;bounceend,0.2;diffusealpha,1;zoomx,0.7"
				SelectMenuOffMessageCommand="stoptweening;linear,0.2;diffusealpha,0;zoomx,0.5"
			/>
		</children> </ActorFrame>

		<ActorFrame
			OnCommand="%function(self) if ModeMenuAvailable() then self:x(SCREEN_CENTER_X+225) else self:x(SCREEN_CENTER_X+125) end end"
		> <children>
			<Layer
				Type="BitmapText"
				Font="_eurostile normal"
				Text="Harder"
				OnCommand="x,0;horizalign,right;zoomx,0.5;zoomy,0.7;diffusealpha,0;diffuseramp;effectperiod,1;effectoffset,0.20;effectclock,bgm;EffectColor1,#FFFFFF;EffectColor2,#E06060"
				EnableSelectHelpMessageCommand="stoptweening;bounceend,0.2;diffusealpha,1;zoomx,0.7"
				SelectMenuOffMessageCommand="stoptweening;linear,0.2;diffusealpha,0;zoomx,0.5"
			/>
			<Layer
				Type="BitmapText"
				Font="_eurostile normal"
				Text="&MENURIGHT;"
				OnCommand="x,+15;horizalign,center;zoomx,0.5;zoomy,0.7;diffusealpha,0"
				EnableSelectHelpMessageCommand="stoptweening;bounceend,0.2;diffusealpha,1;zoomx,0.7"
				SelectMenuOffMessageCommand="stoptweening;linear,0.2;diffusealpha,0;zoomx,0.5"
			/>
		</children> </ActorFrame>
	</children> </ActorFrame>
	
	<!-- the song info -->
	<Layer Type="ActorFrame" InitCommand="x,SCREEN_CENTER_X-270;y,SCREEN_CENTER_Y-70"><children>
		<!-- labels -->
		<Layer
			Type="BitmapText"
			Font="_nunito Bold"
			Text="Artist:"
			Condition="not GAMESTATE:IsCourseMode()"
			InitCommand="shadowlength,0;zoom,0.45;diffuse,#BBBBBB;horizalign,right"
		/>
		
		<Layer
			Type="BitmapText"
			Font="_nunito Bold"
			Text="BPM:"
			Condition="not GAMESTATE:IsCourseMode()"
			InitCommand="y,18;shadowlength,0;zoom,0.45;diffuse,#BBBBBB;horizalign,right"
		/>
		
		<Layer
			Type="BitmapText"
			Font="_nunito Bold"
			Text="Length:"
			Condition="not GAMESTATE:IsCourseMode()"
			InitCommand="x,150;y,18;shadowlength,0;zoom,0.45;diffuse,#BBBBBB;horizalign,right"
		/>
		
		<!-- infos -->
		<Layer
			Type="BitmapText"
			Font="_nunito Bold"
			Text="artist name"
			InitCommand="x,4;y,0;shadowlength,0;zoom,0.45;diffuse,#FFFFFF;horizalign,left;maxwidth,550"
			SetCommand="%function(self)
			local gcs = GAMESTATE:GetCurrentSong()
			local native = PREFSMAN:GetPreference('ShowNativeLanguage')
			if gcs then
				if native then
					self:settext(gcs:GetDisplayArtist())
				else
					self:settext(gcs:GetTranslitArtist())
				end
			else
				self:settext('')
			end
			
			end"
			CurrentSongChangedMessageCommand="playcommand,Set"
		/>
		
		<Layer
			Type="BitmapText"
			Font="_inconsolata small"
			Text="bpms"
			InitCommand="x,4;y,18;shadowlength,0;zoom,0.65;diffuse,#FFFFFF;horizalign,left"
			SetCommand="%function(self)
			local gcs = GAMESTATE:GetCurrentSong()
			if gcs then
				local minbpm = math.floor(gcs:GetMinBPM())
				local maxbpm = math.floor(gcs:GetMaxBPM())
				if maxbpm - minbpm == 0 then
					self:settext(minbpm)
					self:diffuse(1,1,1,1)
				else
					self:settext(minbpm..'-'..maxbpm)
					self:diffuse(1,0.4,0.4,1)
				end
			else
				self:settext('')
				self:diffuse(1,1,1,1)
			end
			
			end"
			CurrentSongChangedMessageCommand="playcommand,Set"
		/>
		
		<Layer
			Type="BitmapText"
			Font="_inconsolata small"
			Text="length"
			InitCommand="x,154;y,18;shadowlength,0;zoom,0.65;diffuse,#FFFFFF;horizalign,left"
			SetCommand="%function(self)
			local gcs = GAMESTATE:GetCurrentSong()
			if gcs then
				self:settext(SecondsToMMSSMsMs(gcs:MusicLengthSeconds()))
			else
				self:settext('')
			end
			
			end"
			CurrentSongChangedMessageCommand="playcommand,Set"
		/>
	</children></Layer>
	
	<!-- info -->
	<Layer
		Type="BitmapText"
		Font="_nunito Bold"
		Text="group name"
		InitCommand="x,SCREEN_CENTER_X-166;y,SCREEN_CENTER_Y-220;shadowlength,0;zoom,0.6;diffuse,#FFFFFF;maxwidth,500"
		SetCommand="%function(self)
		local gcs = GAMESTATE:GetCurrentSong()
		if gcs then
			self:settext(gcs:GetGroupName())
		else
			self:settext('')
		end
		
		end"
		CurrentSongChangedMessageCommand="playcommand,Set"
	/>
	
	<!-- p1 description -->
	<Layer
		Type="ActorFrame"
		Condition="GAMESTATE:IsPlayerEnabled(PLAYER_1)"
		InitCommand="x,SCREEN_CENTER_X-300;y,SCREEN_CENTER_Y+96"
	><children>
		<Layer 
			Type="BitmapText"
			Condition="not GAMESTATE:IsCourseMode()"
			Font="_nunito Bold"
			Text="P1"
			InitCommand="x,-1;y,-29;ShadowLength,0;horizalign,right;zoom,0.375"
		/>
		<Layer 
			Font="_nunito"
			Text="???" 
			OnCommand="x,5;y,-29;zoom,0.375;shadowlength,0;horizalign,left;maxwidth,730" 
			SetCommand="%function(self)
				local steps = GAMESTATE:GetCurrentSteps(PLAYER_1)
				if steps then
					self:settext(steps:GetDescription())	
				else
					self:settext('')
				end
				
				self:diffuse(1,1,1,1) 
			end" 
			CurrentSongChangedMessageCommand="playcommand,Set" 
			CurrentStepsP1ChangedMessageCommand="playcommand,Set" 
		/>
	</children></Layer>
	
	<!-- p2 description -->
	<Layer
		Type="ActorFrame"
		Condition="GAMESTATE:IsPlayerEnabled(PLAYER_2)"
		InitCommand="x,SCREEN_CENTER_X-300;y,SCREEN_CENTER_Y+96"
	><children>
		<Layer 
			Type="BitmapText"
			Condition="not GAMESTATE:IsCourseMode()"
			Font="_nunito Bold"
			Text="P2"
			InitCommand="x,-1;y,-15;ShadowLength,0;horizalign,right;zoom,0.375"
		/>
		<Layer 
			Font="_nunito"
			Text="???" 
			OnCommand="x,5;y,-15;zoom,0.375;shadowlength,0;horizalign,left;maxwidth,730" 
			SetCommand="%function(self)
				local steps = GAMESTATE:GetCurrentSteps(PLAYER_2)
				if steps then
					self:settext(steps:GetDescription())	
				else
					self:settext('')
				end
				
				self:diffuse(1,1,1,1) 
			end" 
			CurrentSongChangedMessageCommand="playcommand,Set" 
			CurrentStepsP2ChangedMessageCommand="playcommand,Set" 
		/>
	</children></Layer>
	
	<!-- quad overlay -->
	<Layer
		Type="Quad"
		InitCommand="stretchto,SCREEN_CENTER_X-324,0,SCREEN_CENTER_X-320,SCREEN_HEIGHT;diffuse,#FFFFFF"
	/>
	
	<Layer
		Type="Quad"
		InitCommand="stretchto,SCREEN_CENTER_X-336,0,SCREEN_CENTER_X-324,SCREEN_HEIGHT;diffuse,#404040;fadeleft,0.5"
	/>
	
	<Layer
		Type="Quad"
		InitCommand="stretchto,SCREEN_CENTER_X+320,0,SCREEN_CENTER_X+324,SCREEN_HEIGHT;diffuse,#FFFFFF"
	/>
	
</children> </ActorFrame>

